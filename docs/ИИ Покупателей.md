## **1. Механика генерации списка покупок**

Каждый покупатель при спавне получает **уникальный список необходимых товаров**, который формируется на основе:
- **Типа покупателя** (например, мама с ребенком, студент, пенсионер).
- **Случайных факторов** (сезонность, праздники, акции).

**Пример списка:**
- **Основные товары** (обязательные к покупке): молоко, хлеб, яйца.
- **Вторичные товары** (дополнительные, с шансом 30-50%): шоколад, чипсы.
## **2. Построение маршрута**
### **2.1. Алгоритм поиска пути**

ИИ рассчитывает **оптимальный маршрут** по магазину, учитывая:
1. **Расположение товаров** из списка.
2. **Логику движения** (избегание пробок, очередь в кассу).
3. **Дополнительные факторы**:
    - Если товар в списке лежит далеко → покупатель может отказаться от него (если он не критичен).
    - Если на пути есть **акционный товар** → шанс взять его повышается.
### **2.2. Визуализация пути** _(опционально, для дебага)_
- Можно добавить **подсветку маршрута** (как в _The Sims_).
- В настройках: включить/выключить отображение.
## **3. Импульсные (спонтанные) покупки**

Пока покупатель идет по маршруту, **каждый товар на его пути** проверяется на:
- Вероятность добавления в корзину (базовый шанс: 5–20%).
- Модификаторы шанса

| **Фактор**              | **Влияние на шанс**              |
| ----------------------- | -------------------------------- |
| Яркая упаковка          | +10%                             |
| Акция (скидка 20%+)     | +25%                             |
| Товар на уровне глаз    | +15%                             |
| Дорогой товар (премиум) | -30% (если покупатель экономный) |
| Последний экземпляр     | +40% (эффект дефицита)           |
### **3.1. Особые триггеры**

- **Рекламные стенды** у кассы резко увеличивают шанс импульсных покупок.    
- **Запахи** (если реализовано): свежая выпечка → +50% к покупке булочек.
## **4. Поведение при невозможности найти товар**

1. **Поиск альтернативы** (если нет "Молока 2.5%" → возьмет 3.2%).
2. **Жалоба менеджеру** (если альтернатив нет → падает репутация магазина).
3. **Уход без покупки** (если не найден ключевой товар).
## **7. Влияние на геймплей**

- **Для игрока**:    
    - Выгодно **класть дорогие товары на пути** к популярным.
    - Хаотичная выкладка → больше импульсных покупок, но больше жалоб.
- **Для атмосферы**
    - Магазин feels alive (покупатели ведут себя по-разному).